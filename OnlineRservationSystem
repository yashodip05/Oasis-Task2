/*Online Rservation System*/

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

class User {
    private String username;
    private String password;

    public User(String username, String password) {
        this.username = username;
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public boolean validatePassword(String inputPassword) {
        return this.password.equals(inputPassword);
    }
}

class Reservation {
    private static int counter = 1000;
    private int pnr;
    private String trainNumber;
    private String trainName;
    private String from;
    private String to;
    private String date;
    private String classType;

    public Reservation(String trainNumber, String trainName, String from, String to, String date, String classType) {
        this.pnr = counter++;
        this.trainNumber = trainNumber;
        this.trainName = trainName;
        this.from = from;
        this.to = to;
        this.date = date;
        this.classType = classType;
    }

    public int getPnr() {
        return pnr;
    }

    public void displayReservation() {
        System.out.println("PNR: " + pnr);
        System.out.println("Train Number: " + trainNumber);
        System.out.println("Train Name: " + trainName);
        System.out.println("From: " + from);
        System.out.println("To: " + to);
        System.out.println("Date: " + date);
        System.out.println("Class: " + classType);
    }
}

public class OnlineReservationSystem {
    private static Scanner scanner = new Scanner(System.in);
    private static List<User> users = new ArrayList<>();
    private static List<Reservation> reservations = new ArrayList<>();
    private static User currentUser;

    public static void main(String[] args) {
        // Add sample users
        users.add(new User("user1", "pass1"));
        users.add(new User("user2", "pass2"));

        System.out.println("Welcome to the Online Reservation System");

        if (login()) {
            boolean exit = false;
            while (!exit) {
                switch (displayMenu()) {
                    case 1:
                        makeReservation();
                        break;
                    case 2:
                        cancelReservation();
                        break;
                    case 3:
                        checkReservationStatus();
                        break;
                    case 4:
                        System.out.println("Logging out...");
                        exit = true;
                        break;
                    default:
                        System.out.println("Invalid option. Please try again.");
                        break;
                }
            }
        }
    }

    private static boolean login() {
        System.out.print("Enter username: ");
        String username = scanner.next();
        System.out.print("Enter password: ");
        String password = scanner.next();

        for (User user : users) {
            if (user.getUsername().equals(username) && user.validatePassword(password)) {
                currentUser = user;
                System.out.println("Login successful.");
                return true;
            }
        }
        System.out.println("Invalid username or password.");
        return false;
    }

    private static int displayMenu() {
        System.out.println("\nMenu:");
        System.out.println("1. Make Reservation");
        System.out.println("2. Cancel Reservation");
        System.out.println("3. Check Reservation Status");
        System.out.println("4. Logout");
        System.out.print("Choose an option: ");
        return scanner.nextInt();
    }

    private static void makeReservation() {
        System.out.print("Enter Train Number: ");
        String trainNumber = scanner.next();
        System.out.print("Enter Train Name: ");
        String trainName = scanner.next();
        System.out.print("Enter From: ");
        String from = scanner.next();
        System.out.print("Enter To: ");
        String to = scanner.next();
        System.out.print("Enter Date (YYYY-MM-DD): ");
        String date = scanner.next();
        System.out.print("Enter Class Type: ");
        String classType = scanner.next();

        Reservation reservation = new Reservation(trainNumber, trainName, from, to, date, classType);
        reservations.add(reservation);
        System.out.println("Reservation successful. Your PNR is " + reservation.getPnr());
    }

    private static void cancelReservation() {
        System.out.print("Enter PNR to cancel: ");
        int pnr = scanner.nextInt();

        for (Reservation reservation : reservations) {
            if (reservation.getPnr() == pnr) {
                reservations.remove(reservation);
                System.out.println("Reservation cancelled successfully.");
                return;
            }
        }
        System.out.println("PNR not found.");
    }

    private static void checkReservationStatus() {
        System.out.print("Enter PNR to check status: ");
        int pnr = scanner.nextInt();

        for (Reservation reservation : reservations) {
            if (reservation.getPnr() == pnr) {
                System.out.println("Reservation found:");
                reservation.displayReservation();
                return;
            }
        }
        System.out.println("PNR not found.");
    }
}
